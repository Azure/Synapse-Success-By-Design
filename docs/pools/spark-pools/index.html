<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="SBD – Spark Pool Design Evaluation #  Apache Spark in Synapse brings the Apache Spark parallel data processing to the Azure Synapse.
Fit Gap Analysis #  When planning to implement Spark pools with Azure Synapse, you first need to ensure Apache Spark Pools in Azure Synapse is the best fit for your workload. These are the items to consider for utilizing Apache Spark in Synapse:
  Does your workload require data engineering/data preparation?">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Spark Pools" />
<meta property="og:description" content="SBD – Spark Pool Design Evaluation #  Apache Spark in Synapse brings the Apache Spark parallel data processing to the Azure Synapse.
Fit Gap Analysis #  When planning to implement Spark pools with Azure Synapse, you first need to ensure Apache Spark Pools in Azure Synapse is the best fit for your workload. These are the items to consider for utilizing Apache Spark in Synapse:
  Does your workload require data engineering/data preparation?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://azure.github.io/Synapse-Success-By-Design/pools/spark-pools/" /><meta property="article:section" content="pools" />
<meta property="article:published_time" content="2021-06-10T18:50:27&#43;01:00" />
<meta property="article:modified_time" content="2021-06-10T18:50:27&#43;01:00" />

<title>Spark Pools | Success by Design</title>
<link rel="manifest" href="/Synapse-Success-By-Design/manifest.json">
<link rel="icon" href="/Synapse-Success-By-Design/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/Synapse-Success-By-Design/book.min.b41cdcc69680b20b305adc2d69f998108e387359ce0e8d2d5f091e788a5bb27c.css" integrity="sha256-tBzcxpaAsgswWtwtafmYEI44c1nODo0tXwkeeIpbsnw=" crossorigin="anonymous">
  <script defer src="/Synapse-Success-By-Design/flexsearch.min.js"></script>
  <script defer src="/Synapse-Success-By-Design/en.search.min.be0ceeb2ecfcda1e18d3db028aa27f91b108f08d0f8bbbded9e371b2449362f0.js" integrity="sha256-vgzusuz82h4Y09sCiqJ/kbEI8I0Pi7ve2eNxskSTYvA=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a href="/Synapse-Success-By-Design/"><img src="/Synapse-Success-By-Design/images/azure-icon.png" alt="Logo" /><span>Success by Design</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/home/" class="">Home</a>
  

          
        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/poc-playbooks/" class="">Poc Playbooks</a>
  

          
        </li>
      
    
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/success-by-design/" class="">Success by Design</a>
  

          
        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/whats-new/" class="">Whats New</a>
  

          
        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/pools/dedicated/" class="">Dedicated Pools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/pools/serverless/" class="">Serverless Pools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/pools/spark-pool/" class="">Spark Pools</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/project/evaluate-project-team/" class="">Evaluate Project Team</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/project/evaluate-project-plan/" class="">Evaluate Project Plan</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="https://azure.github.io/Synapse-Success-By-Design/docs/tools-utilities/" class="">Tools Utilities</a>
  

          
        </li>
      
    
  </ul>















</nav>




  <script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/Synapse-Success-By-Design/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Spark Pools</strong>

  <label for="toc-control">
    
    <img src="/Synapse-Success-By-Design/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents"></nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="sbd--spark-pool-design-evaluation">
  SBD – Spark Pool Design Evaluation
  <a class="anchor" href="#sbd--spark-pool-design-evaluation">#</a>
</h1>
<p>Apache Spark in Synapse brings the Apache Spark parallel data processing
to the Azure Synapse.</p>
<h1 id="fit-gap-analysis">
  Fit Gap Analysis
  <a class="anchor" href="#fit-gap-analysis">#</a>
</h1>
<p>When planning to implement Spark pools with Azure Synapse, you first
need to ensure Apache Spark Pools in Azure Synapse is the best fit for
your workload. These are the items to consider for utilizing Apache
Spark in Synapse:</p>
<ol>
<li>
<p>Does your workload require data engineering/data preparation?</p>
<ul>
<li>
<p>Apache Spark works best for workloads that require:</p>
<ol>
<li>
<p>Data Cleaning</p>
</li>
<li>
<p>Transforming semi-structured data like XML into relational</p>
</li>
<li>
<p>Complex free-text transformation (fuzzy matching, NLP)</p>
</li>
<li>
<p>Prepping data for machine</p>
</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Is your workload for data engineering/data preparation complex or
simple transformations? Are you looking for a low code/no code
approach?</p>
<ul>
<li>
<p>For simple transformations such as dropping of columns, casting
of columns, or joining two datasets. Consider using Data Flows
within Synapse Pipelines.</p>
</li>
<li>
<p>Data Flows also provides a low code/no code approach to your
data processing.</p>
</li>
</ul>
</li>
<li>
<p>Does your workload require machine learning on Big Data?</p>
<ul>
<li>Apache Spark works well for large datasets that will be used for
machine learning. If using small datasets, consider using <a href="https://docs.microsoft.com/en-us/azure/machine-learning/overview-what-is-azure-ml">Azure
Machine
Learning</a>
as the compute.</li>
</ul>
</li>
<li>
<p>Do you plan to perform data exploration and need an ad-hoc query
analysis on Big Data?</p>
<ul>
<li>Apache Spark in Azure Synapse provides Python/Scala/SQL/.NET
based data exploration. However, if you need full T-SQL
experience consider using <a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/sql/on-demand-workspace-overview">Synapse SQL
Serverless</a>.</li>
</ul>
</li>
<li>
<p>Do you have a current Spark/Hadoop workload and need a unified Big
Data Platform?</p>
<ul>
<li>
<p>Azure Synapse provides a full unified analytical platform for
working with Big Data from Spark to SQL Serverless for ad-hoc
queries to SQL on dedicated pools for reporting and serving of
data.</p>
</li>
<li>
<p>Moving from a Spark/Hadoop workload from on-prem or another
cloud environment may require refactoring and should be
considered.</p>
</li>
<li>
<p>If you are looking for a lift and shift approach for your Apache
Big Data environment from on-prem to the cloud and require
strict data engineering SLA, use
<a href="https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-overview">HDInsight</a></p>
</li>
</ul>
</li>
</ol>
<h1 id="architecture-considerations">
  Architecture Considerations
  <a class="anchor" href="#architecture-considerations">#</a>
</h1>
<p>To ensure that your Apache Spark pool meets your operational,
performance, and security requirements, there are key areas to address
in your architecture.</p>
<h1 id="operational-excellence">
  Operational Excellence
  <a class="anchor" href="#operational-excellence">#</a>
</h1>
<p><strong>Environment Configuration</strong></p>
<p>When configuring your environment ensure that you have designed your
pool to take advantage of features such as auto-scale and dynamic
allocation. Also consider utilizing the automatic pause feature to
reduce costs.</p>
<p><strong>Package Management</strong></p>
<p>Determine if the Apache Spark libraries to be used will be used at a
Workspace, Pool, or Session level. When managing packages at each level
there are different considerations to
<a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-azure-portal-add-libraries">consider</a>.</p>
<p><strong>Monitoring</strong></p>
<p>Apache Spark in Azure Synapse provides built-in Spark
<a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/monitoring/how-to-monitor-spark-pools">pool</a>
and
<a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/monitoring/apache-spark-applications">application</a>
monitoring with the creation of each spark session. Also consider
implementing application monitoring with Azure <a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/spark/apache-spark-azure-log-analytics">Log
Analytics</a>
or <a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/spark/use-prometheus-grafana-to-monitor-apache-spark-application-level-metrics">Prometheus and
Grafana</a>
to visualize metrics and logs.</p>
<p><strong>Networking</strong></p>
<p>If designing to use a managed virtual network with Azure Synapse
consider the implications this will have on Apache Spark in Azure
Synapse. One such consideration is the inability to use Spark SQL when
accessing data.</p>
<p>Performance Efficiency</p>
<p><strong>File size and File type:</strong> The size of the file and the type of file
for reading and writing to and from Apache Spark to cloud storage is key
to good performance. Both should be handled prior to ingestion to Apache
Spark. Design the architecture to ensure that the files types are file
types that is conducive to native ingestion with Apache Spark. Also
ensure that the size of the files are large files and not many small
files.</p>
<p><strong>Partitioning:</strong> Determine if partitioning at the folder and/or file
level will be implemented for your workload. Folder partition limits the
amount of data to be searched and read. File partitioning reduces the
amount of data to be searched in the file but only applies to specific
file formats and needs to be considered in the initial architecture.</p>
<p>Security</p>
<p>Security for the data to be accessed must be considered at the ADLS
account that is attached to the Synapse workspace. In addition,
determine the security levels that should be required to access any data
that is not within the Synapse environment.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>


 
        <hr />
Azure Synapse &copy;2021 <br />
Visit the <a href="https://azure.microsoft.com/services/storage/">Azure Synapse homepage</a> or read our <a href="https://docs.microsoft.com/en-us/azure/synapse-analytics/get-started">getting started guide</a> or the 
<a href="https://techcommunity.microsoft.com/t5/azure-synapse-analytics/bg-p/AzureSynapseAnalyticsBlog">Azure Synapse Blog</a>. <br />
Contact us: <a href="mailto:synapsefeedback@microsoft.com?subject=AzureSynapse.com%20Feedback">synapsefeedback@microsoft.com</a>.<br />
Generated on Mon, Jun 14 2021 14:19:24 UTC
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents"></nav>


 
      </div>
    </aside>
    
  </main>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>

<script>
    $('a[href^="http://"], a[href^="https://"]').not('a[href*="'+location.hostname+'"]').attr('target','_blank');
</script>

<script type="text/javascript">
    !function(T,l,y){var S=T.location,u="script",k="instrumentationKey",D="ingestionendpoint",C="disableExceptionTracking",E="ai.device.",I="toLowerCase",b="crossOrigin",w="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"4",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[I](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,p,l,u;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][I]()]=i[1])}if(!e[D]){var r=e.endpointsuffix,o=r?e.location:null;e[D]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[k]||d[k]||"",p=s[D],l=p?p+"/v2/track":config.endpointUrl,(u=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=l,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\./g,"-"),hasFullStack:!1,stack:n+"\nSnippet failed to load ["+a+"] -- Telemetry is disabled\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\nHost: "+(S&&S.pathname||"_unknown_")+"\nEndpoint: "+i,parsedStack:[]}],r)),u.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,l)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:w,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(w,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(u,l))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(u);n.src=h;var e=y[b];return!e&&""!==e||"undefined"==n[b]||(n[b]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(u)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[C]&&!0!==s[C]){method="onerror",t(["_"+method]);var c=T[method];T[method]=function(e,t,n,a,i){var r=c&&c(e,t,n,a,i);return!0!==r&&m["_"+method]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);(T[t]=n).queue&&0===n.queue.length&&n.trackPageView({})}(window,document,{
    src: "https://az416426.vo.msecnd.net/scripts/b/ai.2.min.js", 
    
    
    
    
    cfg: { 
        instrumentationKey: "0600b273-5440-42cc-9fe4-51924c721ce0"
         
    }});
</script>
</body>
</html>












